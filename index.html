<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Calculadora Precios Chimeneas Valladolid 2025 | Presupuesto Gratis</title>
    <meta name="description" content="üî• Calculadora gratuita de precios de chimeneas y estufas de pellets en Valladolid. Presupuesto instant√°neo + 3 empresas verificadas te contactan en 24h. ‚úÖ Gratis ‚úÖ Sin compromiso">
    <meta name="keywords" content="calculadora chimeneas valladolid, precio estufa pellets valladolid, presupuesto chimeneas valladolid, instalacion chimeneas valladolid, chimeneas baratas valladolid">
    <meta name="author" content="ChimeneasValladolid.com">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://calculadorachimeneasvalladolid.netlify.app/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://calculadorachimeneasvalladolid.netlify.app/">
    <meta property="og:title" content="Calculadora Precios Chimeneas Valladolid 2025 | Presupuesto Gratis">
    <meta property="og:description" content="üî• Calculadora gratuita de precios de chimeneas y estufas de pellets en Valladolid. Presupuesto instant√°neo + 3 empresas verificadas.">
    <meta property="og:image" content="https://calculadorachimeneasvalladolid.netlify.app/og-image.jpg">
    <meta property="og:locale" content="es_ES">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://calculadorachimeneasvalladolid.netlify.app/">
    <meta property="twitter:title" content="Calculadora Precios Chimeneas Valladolid 2025">
    <meta property="twitter:description" content="üî• Calculadora gratuita de precios de chimeneas y estufas de pellets en Valladolid.">
    <meta property="twitter:image" content="https://calculadorachimeneasvalladolid.netlify.app/og-image.jpg">
    
    <!-- Geo Meta Tags -->
    <meta name="geo.region" content="ES-VA">
    <meta name="geo.placename" content="Valladolid">
    <meta name="geo.position" content="41.6523;-4.7245">
    <meta name="ICBM" content="41.6523, -4.7245">
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Calculadora de Precios de Chimeneas Valladolid",
        "description": "Calculadora gratuita para obtener presupuestos de chimeneas y estufas de pellets en Valladolid",
        "url": "https://calculadorachimeneasvalladolid.netlify.app/",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR",
            "description": "Calculadora gratuita de presupuestos"
        },
        "areaServed": {
            "@type": "City",
            "name": "Valladolid",
            "@id": "https://es.wikipedia.org/wiki/Valladolid"
        },
        "serviceType": "Presupuesto de chimeneas",
        "provider": {
            "@type": "Organization",
            "name": "ChimeneasValladolid.com",
            "url": "https://calculadorachimeneasvalladolid.netlify.app/"
        },
        "potentialAction": {
            "@type": "UseAction",
            "target": "https://calculadorachimeneasvalladolid.netlify.app/",
            "object": "Calculadora de Precios"
        }
    }
    </script>
    
    <!-- Service Schema (Sin direcci√≥n f√≠sica requerida) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Service",
        "@id": "https://calculadorachimeneasvalladolid.netlify.app/#service",
        "name": "Conexi√≥n con Profesionales de Chimeneas en Valladolid",
        "description": "Servicio gratuito que conecta clientes con las mejores empresas de chimeneas y estufas de pellets en Valladolid",
        "url": "https://calculadorachimeneasvalladolid.netlify.app/",
        "serviceType": "Intermediaci√≥n y conexi√≥n con profesionales",
        "category": "Servicios de construcci√≥n y hogar",
        "areaServed": {
            "@type": "City",
            "name": "Valladolid",
            "addressRegion": "Castilla y Le√≥n",
            "addressCountry": "ES"
        },
        "availableChannel": {
            "@type": "ServiceChannel",
            "serviceUrl": "https://calculadorachimeneasvalladolid.netlify.app/",
            "serviceSmsNumber": null,
            "servicePhone": null
        },
        "offers": {
            "@type": "Offer",
            "description": "Servicio gratuito de conexi√≥n con profesionales",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "provider": {
            "@type": "Organization",
            "name": "ChimeneasValladolid.com",
            "url": "https://calculadorachimeneasvalladolid.netlify.app/"
        },
        "serviceAudience": {
            "@type": "Audience",
            "geographicArea": {
                "@type": "City", 
                "name": "Valladolid"
            }
        }
    }
    </script>
    
    <!-- Calculator Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Calculadora de Precios de Chimeneas",
        "applicationCategory": "CalculatorApplication",
        "description": "Herramienta gratuita para calcular el precio de instalaci√≥n de chimeneas y estufas de pellets en Valladolid",
        "url": "https://calculadorachimeneasvalladolid.netlify.app/",
        "operatingSystem": "Web Browser",
        "permissions": "No requiere permisos especiales",
        "offers": {
            "@type": "Offer",
            "price": "0.00",
            "priceCurrency": "EUR"
        },
        "featureList": [
            "C√°lculo instant√°neo de precios",
            "Comparativa por tipos de chimenea",
            "Presupuestos de empresas locales",
            "Sin registro requerido"
        ]
    }
    </script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        .calculator-bg { background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%); }
        .loading { display: none; }
        .loading.active { display: inline-block; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="calculator-bg text-white py-12">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <div class="text-5xl mb-4">üî•</div>
            <h1 class="text-4xl font-bold mb-4">
                Calculadora GRATUITA de Precios
            </h1>
            <p class="text-xl mb-6">
                Descubre cu√°nto cuesta instalar tu chimenea en Valladolid
            </p>
            <p class="text-lg opacity-90">
                ‚úÖ Precios actualizados 2025 ‚úÖ Empresas locales ‚úÖ Sin compromiso
            </p>
        </div>
    </div>

    <div class="max-w-3xl mx-auto px-4 py-8">
        <!-- Calculadora Interactiva -->
        <div class="bg-white rounded-xl shadow-xl p-8">
            <h2 class="text-2xl font-bold mb-6 text-center">Calcula tu Presupuesto en 3 Pasos</h2>
            
            <div id="step1" class="calculator-step">
                <h3 class="text-xl font-semibold mb-4">1. ¬øQu√© tipo de chimenea quieres?</h3>
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <button onclick="selectOption('tipo', 'pellets', 1500)" 
                            class="option-btn p-6 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="text-3xl mb-2">üå±</div>
                        <div class="font-semibold">Estufa de Pellets</div>
                        <div class="text-sm text-gray-600">Desde 1.500‚Ç¨</div>
                    </button>
                    <button onclick="selectOption('tipo', 'le√±a', 800)" 
                            class="option-btn p-6 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="text-3xl mb-2">ü™µ</div>
                        <div class="font-semibold">Chimenea de Le√±a</div>
                        <div class="text-sm text-gray-600">Desde 800‚Ç¨</div>
                    </button>
                    <button onclick="selectOption('tipo', 'gas', 1200)" 
                            class="option-btn p-6 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="text-3xl mb-2">üî•</div>
                        <div class="font-semibold">Chimenea de Gas</div>
                        <div class="text-sm text-gray-600">Desde 1.200‚Ç¨</div>
                    </button>
                    <button onclick="selectOption('tipo', 'insertable', 2000)" 
                            class="option-btn p-6 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="text-3xl mb-2">üè†</div>
                        <div class="font-semibold">Insert/Insertable</div>
                        <div class="text-sm text-gray-600">Desde 2.000‚Ç¨</div>
                    </button>
                </div>
            </div>

            <div id="step2" class="calculator-step hidden">
                <h3 class="text-xl font-semibold mb-4">2. Tama√±o de la habitaci√≥n</h3>
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <button onclick="selectOption('tama√±o', 'peque√±a', 0)" 
                            class="option-btn p-4 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="font-semibold">Peque√±a</div>
                        <div class="text-sm text-gray-600">Hasta 30m¬≤</div>
                    </button>
                    <button onclick="selectOption('tama√±o', 'mediana', 300)" 
                            class="option-btn p-4 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="font-semibold">Mediana</div>
                        <div class="text-sm text-gray-600">30-60m¬≤</div>
                        <div class="text-xs text-orange-600">+300‚Ç¨</div>
                    </button>
                    <button onclick="selectOption('tama√±o', 'grande', 600)" 
                            class="option-btn p-4 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="font-semibold">Grande</div>
                        <div class="text-sm text-gray-600">+60m¬≤</div>
                        <div class="text-xs text-orange-600">+600‚Ç¨</div>
                    </button>
                </div>
            </div>

            <div id="step3" class="calculator-step hidden">
                <h3 class="text-xl font-semibold mb-4">3. ¬øNecesitas instalaci√≥n?</h3>
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <button onclick="selectOption('instalacion', 'basica', 500)" 
                            class="option-btn p-4 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="font-semibold">Instalaci√≥n B√°sica</div>
                        <div class="text-sm text-gray-600">+500‚Ç¨</div>
                    </button>
                    <button onclick="selectOption('instalacion', 'completa', 1200)" 
                            class="option-btn p-4 border-2 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition">
                        <div class="font-semibold">Instalaci√≥n Completa</div>
                        <div class="text-sm text-gray-600">Con salida humos +1.200‚Ç¨</div>
                    </button>
                </div>
            </div>

            <!-- Resultado -->
            <div id="resultado" class="hidden bg-gradient-to-r from-green-400 to-blue-500 text-white p-8 rounded-xl text-center">
                <h3 class="text-2xl font-bold mb-4">üí∞ Tu Presupuesto Estimado</h3>
                <div class="text-4xl font-bold mb-2" id="precio-final">0‚Ç¨</div>
                <p class="text-lg mb-6" id="desglose"></p>
                
                <!-- Formulario para conseguir contacto -->
                <div class="bg-white text-gray-800 p-6 rounded-lg max-w-md mx-auto">
                    <h4 class="text-lg font-semibold mb-4">¬°Consigue 3 Presupuestos GRATIS!</h4>
                    <form id="lead-form" class="space-y-3">
                        <input type="text" id="nombre" placeholder="Tu nombre" required 
                               class="w-full p-3 border rounded-lg">
                        <input type="tel" id="telefono" placeholder="Tu tel√©fono" required 
                               class="w-full p-3 border rounded-lg">
                        <input type="email" id="email" placeholder="Tu email" required 
                               class="w-full p-3 border rounded-lg">
                        <textarea id="comentarios" placeholder="Comentarios adicionales (opcional)" 
                                  class="w-full p-3 border rounded-lg h-16"></textarea>
                        
                        <button type="submit" id="submit-btn"
                                class="w-full bg-orange-500 text-white font-bold py-3 rounded-lg hover:bg-orange-600 transition">
                            <span id="btn-text">üöÄ CONSEGUIR PRESUPUESTOS GRATIS</span>
                            <span class="loading" id="loading-spinner">
                                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Enviando...
                            </span>
                        </button>
                    </form>
                    <p class="text-xs text-gray-600 mt-2">
                        ‚úÖ 3 empresas verificadas te contactar√°n en 24h
                    </p>
                </div>
                
                <!-- Mensaje de √©xito -->
                <div id="success-message" class="hidden mt-4 p-4 bg-green-100 text-green-800 rounded-lg">
                    <h5 class="font-semibold">¬°Solicitud enviada correctamente! ‚úÖ</h5>
                    <p class="text-sm mt-1">Te contactaremos en las pr√≥ximas 24 horas con 3 presupuestos de empresas verificadas en Valladolid.</p>
                </div>
                
                <!-- Mensaje de error -->
                <div id="error-message" class="hidden mt-4 p-4 bg-red-100 text-red-800 rounded-lg">
                    <h5 class="font-semibold">Error al enviar ‚ùå</h5>
                    <p class="text-sm mt-1">Por favor, int√©ntalo de nuevo o ll√°manos directamente.</p>
                </div>
            </div>

            <!-- Precio en tiempo real -->
            <div id="precio-preview" class="text-center py-4 hidden">
                <div class="text-2xl font-bold text-orange-600" id="precio-actual">0‚Ç¨</div>
                <p class="text-sm text-gray-600">Precio estimado actual</p>
            </div>
        </div>

        <!-- Comparativa de precios -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold mb-4 text-center">üí° Precios Orientativos en Valladolid (2025)</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-semibold mb-2">üå± Estufas de Pellets</h4>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ B√°sica: 1.500‚Ç¨ - 2.500‚Ç¨</li>
                        <li>‚Ä¢ Premium: 2.500‚Ç¨ - 4.000‚Ç¨</li>
                        <li>‚Ä¢ Instalaci√≥n: 500‚Ç¨ - 1.200‚Ç¨</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">ü™µ Chimeneas de Le√±a</h4>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ Insert b√°sico: 800‚Ç¨ - 1.500‚Ç¨</li>
                        <li>‚Ä¢ Insert premium: 1.500‚Ç¨ - 3.000‚Ç¨</li>
                        <li>‚Ä¢ Instalaci√≥n: 400‚Ç¨ - 1.000‚Ç¨</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuraci√≥n EmailJS - ACTUALIZAR ESTOS VALORES
        const EMAIL_CONFIG = {
            serviceID: 'service_1bmf37n',      // Cambiar por tu Service ID
            templateID: 'template_v713iom',    // Cambiar por tu Template ID  
            userID: 'TInhixAuLBkF3El9k',         // Cambiar por tu Public Key
            toEmail: 'jbmegido123@gmail.com'     // TU EMAIL donde quieres recibir los leads
        };
        
        // Inicializar EmailJS
        (function() {
            emailjs.init(EMAIL_CONFIG.userID);
        })();

        let calculatorData = {
            tipo: { value: null, price: 0 },
            tama√±o: { value: null, price: 0 },
            instalacion: { value: null, price: 0 }
        };

        function selectOption(category, value, price) {
            calculatorData[category] = { value, price };
            
            // Marcar opci√≥n seleccionada
            document.querySelectorAll(`#step${getCurrentStep()} .option-btn`).forEach(btn => {
                btn.classList.remove('border-orange-500', 'bg-orange-50');
            });
            event.target.closest('.option-btn').classList.add('border-orange-500', 'bg-orange-50');
            
            updatePrice();
            nextStep();
        }

        function getCurrentStep() {
            if (!calculatorData.tipo.value) return 1;
            if (!calculatorData.tama√±o.value) return 2;
            if (!calculatorData.instalacion.value) return 3;
            return 4;
        }

        function nextStep() {
            const currentStep = getCurrentStep();
            
            // Ocultar step actual
            if (currentStep > 1) {
                document.getElementById(`step${currentStep - 1}`).classList.add('hidden');
            }
            
            // Mostrar siguiente step o resultado
            if (currentStep <= 3) {
                document.getElementById(`step${currentStep}`).classList.remove('hidden');
                document.getElementById('precio-preview').classList.remove('hidden');
            } else {
                showResult();
            }
        }

        function updatePrice() {
            const total = calculatorData.tipo.price + calculatorData.tama√±o.price + calculatorData.instalacion.price;
            document.getElementById('precio-actual').textContent = total.toLocaleString() + '‚Ç¨';
        }

        function showResult() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('precio-preview').classList.add('hidden');
            
            const total = calculatorData.tipo.price + calculatorData.tama√±o.price + calculatorData.instalacion.price;
            const range = `${total.toLocaleString()}‚Ç¨ - ${(total * 1.3).toLocaleString()}‚Ç¨`;
            
            document.getElementById('precio-final').textContent = range;
            document.getElementById('desglose').textContent = 
                `${calculatorData.tipo.value} + habitaci√≥n ${calculatorData.tama√±o.value} + ${calculatorData.instalacion.value}`;
            
            document.getElementById('resultado').classList.remove('hidden');
        }

        // Manejar env√≠o del formulario
        document.getElementById('lead-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Mostrar loading
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const loadingSpinner = document.getElementById('loading-spinner');
            const successMsg = document.getElementById('success-message');
            const errorMsg = document.getElementById('error-message');
            
            // Ocultar mensajes previos
            successMsg.classList.add('hidden');
            errorMsg.classList.add('hidden');
            
            // Mostrar loading
            btnText.classList.add('hidden');
            loadingSpinner.classList.add('active');
            submitBtn.disabled = true;
            
            // Recoger datos del formulario
            const leadData = {
                nombre: document.getElementById('nombre').value,
                telefono: document.getElementById('telefono').value,
                email: document.getElementById('email').value,
                comentarios: document.getElementById('comentarios').value,
                tipo_chimenea: calculatorData.tipo.value,
                tama√±o_habitacion: calculatorData.tama√±o.value,
                tipo_instalacion: calculatorData.instalacion.value,
                presupuesto_estimado: calculatorData.tipo.price + calculatorData.tama√±o.price + calculatorData.instalacion.price,
                fecha_hora: new Date().toLocaleString('es-ES'),
                fuente: 'Calculadora Web Valladolid'
            };
            
            // Preparar par√°metros para el email
            const templateParams = {
                to_email: EMAIL_CONFIG.toEmail,
                subject: `üö® NUEVO LEAD CHIMENEAS: ${leadData.nombre} - ${leadData.presupuesto_estimado}‚Ç¨`,
                
                // Datos del cliente
                cliente_nombre: leadData.nombre,
                cliente_telefono: leadData.telefono,
                cliente_email: leadData.email,
                cliente_comentarios: leadData.comentarios || 'Sin comentarios adicionales',
                
                // Detalles del proyecto  
                tipo_chimenea: leadData.tipo_chimenea,
                tama√±o_habitacion: leadData.tama√±o_habitacion,
                tipo_instalacion: leadData.tipo_instalacion,
                presupuesto_estimado: leadData.presupuesto_estimado.toLocaleString() + '‚Ç¨',
                
                // Metadatos
                fecha_hora: leadData.fecha_hora,
                fuente: leadData.fuente,
                
                // Mensaje completo formateado
                mensaje_completo: `
NUEVO LEAD GENERADO üö®

üë§ DATOS CLIENTE:
Nombre: ${leadData.nombre}
Tel√©fono: ${leadData.telefono}
Email: ${leadData.email}

üî• DETALLES PROYECTO:
Tipo: ${leadData.tipo_chimenea}
Habitaci√≥n: ${leadData.tama√±o_habitacion}
Instalaci√≥n: ${leadData.tipo_instalacion}
Presupuesto estimado: ${leadData.presupuesto_estimado.toLocaleString()}‚Ç¨

üìù COMENTARIOS:
${leadData.comentarios || 'Sin comentarios adicionales'}

üïê FECHA/HORA: ${leadData.fecha_hora}
üåê FUENTE: ${leadData.fuente}

¬°Contacta al cliente en las pr√≥ximas 2 horas para mejor conversi√≥n!
                `.trim()
            };
            
            // Enviar email
            emailjs.send(EMAIL_CONFIG.serviceID, EMAIL_CONFIG.templateID, templateParams)
                .then(function(response) {
                    console.log('Email enviado correctamente:', response);
                    
                    // Mostrar mensaje de √©xito
                    successMsg.classList.remove('hidden');
                    
                    // Ocultar formulario
                    document.getElementById('lead-form').style.display = 'none';
                    
                    // Analytics (opcional)
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'lead_generated', {
                            event_category: 'Lead Generation',
                            event_label: 'Calculadora Chimeneas',
                            value: leadData.presupuesto_estimado
                        });
                    }
                    
                }, function(error) {
                    console.error('Error enviando email:', error);
                    
                    // Mostrar mensaje de error
                    errorMsg.classList.remove('hidden');
                })
                .finally(function() {
                    // Ocultar loading
                    btnText.classList.remove('hidden');
                    loadingSpinner.classList.remove('active');
                    submitBtn.disabled = false;
                });
        });
    </script>

</body>
</html>
